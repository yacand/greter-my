var Version = {
    VERSION: 1,
    MAJOR: 0,
    MINOR: 0,
    REVISION: 219,
    DATE: "07.02.2017  0:14:25,94"
};
var Game;
(function (Game) {
    "use strict";
    var GameView = (function () {
        function GameView() {
            this._game = null;
            this._stage = null;
            this._data = null;
            this._armatureDisplay = null;
            this._dragging = false;
        }
        GameView.prototype.init = function (game, stage) {
            this._game = game;
            this._stage = stage;
            this._stage.interactive = true;
            var armature = dragonBones.PixiFactory.factory.buildArmature("shipball");
            var armatureDisplay = armature.display;
            armatureDisplay.x = this._game.width * .5;
            armatureDisplay.y = this._game.height * .5;
            armature.addEventListener(dragonBones.EventObject.START, this._animationEventHandler, this);
            armature.addEventListener(dragonBones.EventObject.FRAME_EVENT, this._animationEventHandler, this);
            armature.animation.play("ship-anim-1");
            armature.animation.timeScale = 1;
            var bones = armature.getBones();
            var bone = armature.getBone("boneBall");
            armatureDisplay.interactive = true;
            armatureDisplay.buttonMode = true;
            armatureDisplay.on('pointerdown', this.onDragStart, this);
            armatureDisplay.on('pointerup', this.onDragEnd, this);
            armatureDisplay.on('pointerupoutside', this.onDragEnd, this);
            armatureDisplay.on('pointermove', this.onDragMove, this);
            dragonBones.WorldClock.clock.add(armature);
            this._stage.addChild(armatureDisplay);
            this._armatureDisplay = armatureDisplay;
        };
        GameView.prototype.onDragStart = function (event) {
            this._data = event.data;
            this._data.alpha = 0.5;
            this._dragging = true;
            var newPosition = this._data.getLocalPosition(this._armatureDisplay.parent);
            this._armatureDisplay.x = newPosition.x;
            this._armatureDisplay.y = newPosition.y + this._armatureDisplay.height * 0.5;
        };
        GameView.prototype.onDragEnd = function () {
            this._data.alpha = 1;
            this._dragging = false;
            this._data = null;
            this._armatureDisplay.x = this._game.width * .5;
            this._armatureDisplay.y = this._game.height * .5;
        };
        GameView.prototype.onDragMove = function () {
            if (this._dragging) {
                var newPosition = this._data.getLocalPosition(this._stage);
                this._armatureDisplay.x = newPosition.x;
                this._armatureDisplay.y = newPosition.y + this._armatureDisplay.height * 0.5;
            }
        };
        GameView.prototype._animationEventHandler = function (event) {
            console.log(event.type, event.name, event.animationState.name);
        };
        GameView.prototype._renderHandler = function (deltaTime) {
            dragonBones.WorldClock.clock.advanceTime(-1);
            this._game.render(this._stage);
        };
        return GameView;
    }());
    Game.GameView = GameView;
})(Game || (Game = {}));
var Game;
(function (Game) {
    "use strict";
    var Preloader = (function () {
        function Preloader() {
            "use strict";
            this._game = null;
            this._stage = null;
            this._gameView = null;
        }
        Preloader.prototype.init = function (game, stage) {
            this._game = game;
            this._stage = stage;
            PIXI.ticker.shared.add(this._renderHandler, this);
            PIXI.loader.add("dragonBonesData", "./resources/art_ske.json");
            PIXI.loader.add("textureDataA", "./resources/art_tex.json");
            PIXI.loader.add("textureA", "./resources/art_tex.png");
            PIXI.loader.once("complete", this._loadCompleteHandler, this);
            PIXI.loader.load();
        };
        Preloader.prototype._renderHandler = function (deltaTime) {
            dragonBones.WorldClock.clock.advanceTime(-1);
            this._game.render(this._stage);
        };
        Preloader.prototype._loadCompleteHandler = function (loader, object) {
            dragonBones.PixiFactory.factory.parseDragonBonesData(object["dragonBonesData"].data);
            dragonBones.PixiFactory.factory.parseTextureAtlasData(object["textureDataA"].data, object["textureA"].texture);
            this._gameView = new Game.GameView();
            this._gameView.init(this._game, this._stage);
        };
        return Preloader;
    }());
    Game.Preloader = Preloader;
})(Game || (Game = {}));
var Game;
(function (Game) {
    "use strict";
    var Main = (function () {
        function Main() {
            this._game = new PIXI.WebGLRenderer(250, 250, { backgroundColor: 0xffffff });
            this._stage = new PIXI.Container();
            this._backgroud = new PIXI.Sprite(PIXI.Texture.EMPTY);
        }
        Main.prototype.init = function () {
            document.body.appendChild(this._game.view);
            this._stage.addChild(this._backgroud);
            this._backgroud.width = this._game.width;
            this._backgroud.height = this._game.height;
            this.startPreloader();
        };
        Main.prototype.startPreloader = function () {
            this._preloader = new Game.Preloader();
            this._preloader.init(this._game, this._stage);
        };
        return Main;
    }());
    Game.Main = Main;
})(Game || (Game = {}));
var Game;
(function (Game) {
    "use strict";
    var AppStart = (function () {
        function AppStart() {
        }
        AppStart.prototype.init = function () {
            var main = new Game.Main();
            main.init();
        };
        return AppStart;
    }());
    var appStart = new AppStart();
    appStart.init();
})(Game || (Game = {}));

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy90cy9WZXJzaW9uLnRzIiwic3JjL3RzL0dhbWUvR2FtZVZpZXcudHMiLCJzcmMvdHMvR2FtZS9QcmVsb2FkZXIudHMiLCJzcmMvdHMvR2FtZS9NYWluLnRzIiwic3JjL3RzL0FwcFN0YXJ0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUksT0FBTyxHQUNYO0lBQ0MsT0FBTyxFQUFDLENBQUM7SUFDVCxLQUFLLEVBQUMsQ0FBQztJQUNQLEtBQUssRUFBQyxDQUFDO0lBQ1AsUUFBUSxFQUFDLEdBQUc7SUFDWixJQUFJLEVBQUMsd0JBQXdCO0NBQzdCLENBQUE7QUNQRCxJQUFPLElBQUksQ0E2R1Y7QUE3R0QsV0FBTyxJQUFJO0lBRVAsWUFBWSxDQUFBO0lBUVo7UUFTSTtZQVBRLFVBQUssR0FBc0IsSUFBSSxDQUFDO1lBQ2hDLFdBQU0sR0FBa0IsSUFBSSxDQUFDO1lBQzdCLFVBQUssR0FBTyxJQUFJLENBQUM7WUFDakIscUJBQWdCLEdBQW1DLElBQUksQ0FBQztZQUN4RCxjQUFTLEdBQVcsS0FBSyxDQUFDO1FBTWxDLENBQUM7UUFFTSx1QkFBSSxHQUFYLFVBQVksSUFBdUIsRUFBRSxLQUFvQjtZQUVyRCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztZQUNsQixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztZQUVwQixJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7WUFDL0IsSUFBSSxRQUFRLEdBQUcsV0FBVyxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3pFLElBQUksZUFBZSxHQUF3QixRQUFRLENBQUMsT0FBTyxDQUFDO1lBQzVELGVBQWUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO1lBQzFDLGVBQWUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcs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QUE7SUExQlksU0FBSSxPQTBCaEIsQ0FBQTtBQUNMLENBQUMsRUEvQk0sSUFBSSxLQUFKLElBQUksUUErQlY7QUM5QkQsSUFBTyxJQUFJLENBbUJWO0FBbkJELFdBQU8sSUFBSTtJQUVQLFlBQVksQ0FBQTtJQUVaO1FBRUk7UUFFQSxDQUFDO1FBRU0sdUJBQUksR0FBWDtZQUVJLElBQU0sSUFBSSxHQUFhLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3ZDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNoQixDQUFDO1FBQ0wsZUFBQztJQUFELENBWEEsQUFXQyxJQUFBO0lBRUQsSUFBTSxRQUFRLEdBQVksSUFBSSxRQUFRLEVBQUUsQ0FBQztJQUN6QyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDcEIsQ0FBQyxFQW5CTSxJQUFJLEtBQUosSUFBSSxRQW1CViIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgVmVyc2lvbiA9IFxyXG57IFxyXG5cdFZFUlNJT046MSwgLy8tLSBQdWJsaWMgbGF1bmNoIFxyXG5cdE1BSk9SOjAsIC8vLS0gTWlsZXN0b25lIFxyXG5cdE1JTk9SOjAsIC8vLS0gU3ByaW50cyAvIGludGVybWVkaWF0ZSByZWxlYXNlcyBcclxuXHRSRVZJU0lPTjoyMTksIC8vLS0gYnVpbGQgaW5jcmVtZW50IFxyXG5cdERBVEU6XCIwNy4wMi4yMDE3ICAwOjE0OjI1LDk0XCIgXHJcbn0gXHJcbiIsIm1vZHVsZSBHYW1lXG57XG4gICAgXCJ1c2Ugc3RyaWN0XCJcbiAgICBpbXBvcnQgUG9pbnRUeXBlID0gUElYSS5Qb2ludDtcbiAgICBpbXBvcnQgSW50ZXJhY3Rpb25FdmVudCA9IFBJWEkuaW50ZXJhY3Rpb24uSW50ZXJhY3Rpb25FdmVudDtcbiAgICBpbXBvcnQgQXJtYXR1cmVEaXNwbGF5VHlwZSA9IGRyYWdvbkJvbmVzLlBpeGlBcm1hdHVyZURpc3BsYXk7XG4gICAgaW1wb3J0IEV2ZW50VHlwZSA9IGRyYWdvbkJvbmVzLkV2ZW50T2JqZWN0O1xuICAgIGltcG9ydCBCb25lID0gZHJhZ29uQm9uZXMuQm9uZTtcblxuXG4gICAgZXhwb3J0IGNsYXNzIEdhbWVWaWV3XG4gICAge1xuICAgICAgICBwcml2YXRlIF9nYW1lOlBJWEkuV2ViR0xSZW5kZXJlciA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgX3N0YWdlOlBJWEkuQ29udGFpbmVyID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBfZGF0YTphbnkgPSBudWxsO1xuICAgICAgICBwcml2YXRlIF9hcm1hdHVyZURpc3BsYXk6ZHJhZ29uQm9uZXMuUGl4aUFybWF0dXJlRGlzcGxheSA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgX2RyYWdnaW5nOmJvb2xlYW4gPSBmYWxzZTtcblxuXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpXG4gICAgICAgIHtcblxuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGluaXQoZ2FtZTpQSVhJLldlYkdMUmVuZGVyZXIsIHN0YWdlOlBJWEkuQ29udGFpbmVyKTp2b2lkXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX2dhbWUgPSBnYW1lO1xuICAgICAgICAgICAgdGhpcy5fc3RhZ2UgPSBzdGFnZTtcblxuICAgICAgICAgICAgdGhpcy5fc3RhZ2UuaW50ZXJhY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIGFybWF0dXJlID0gZHJhZ29uQm9uZXMuUGl4aUZhY3RvcnkuZmFjdG9yeS5idWlsZEFybWF0dXJlKFwic2hpcGJhbGxcIik7XG4gICAgICAgICAgICB2YXIgYXJtYXR1cmVEaXNwbGF5ID0gPEFybWF0dXJlRGlzcGxheVR5cGU+YXJtYXR1cmUuZGlzcGxheTtcbiAgICAgICAgICAgIGFybWF0dXJlRGlzcGxheS54ID0gdGhpcy5fZ2FtZS53aWR0aCAqIC41O1xuICAgICAgICAgICAgYXJtYXR1cmVEaXNwbGF5LnkgPSB0aGlzLl9nYW1lLmhlaWdodCAqIC41O1xuICAgICAgICAgICAgYXJtYXR1cmUuYWRkRXZlbnRMaXN0ZW5lcihkcmFnb25Cb25lcy5FdmVudE9iamVjdC5TVEFSVCwgdGhpcy5fYW5pbWF0aW9uRXZlbnRIYW5kbGVyLCB0aGlzKTtcbiAgICAgICAgICAgIGFybWF0dXJlLmFkZEV2ZW50TGlzdGVuZXIoZHJhZ29uQm9uZXMuRXZlbnRPYmplY3QuRlJBTUVfRVZFTlQsIHRoaXMuX2FuaW1hdGlvbkV2ZW50SGFuZGxlciwgdGhpcyk7XG4gICAgICAgICAgICBhcm1hdHVyZS5hbmltYXRpb24ucGxheShcInNoaXAtYW5pbS0xXCIpO1xuICAgICAgICAgICAgLy9hcm1hdHVyZS5hbmltYXRpb24ucGxheShcInNoaXAtYW5pbS0yXCIpO1xuICAgICAgICAgICAgYXJtYXR1cmUuYW5pbWF0aW9uLnRpbWVTY2FsZSA9IDE7XG4gICAgICAgICAgICAvL2FybWF0dXJlLmFuaW1hdGlvbi5mYWRlSW4oXCJzaGlwLWFuaW0tMlwiLCAyLCAyKTtcbiAgICAgICAgICAgIC8vYXJtYXR1cmUuYW5pbWF0aW9uLnRpbWVTY2FsZSA9IDAuMTtcbiAgICAgICAgICAgIHZhciBib25lczpBcnJheTxCb25lPiA9IGFybWF0dXJlLmdldEJvbmVzKCk7XG4gICAgICAgICAgICB2YXIgYm9uZTpCb25lID0gYXJtYXR1cmUuZ2V0Qm9uZShcImJvbmVCYWxsXCIpO1xuICAgICAgICAgICAgLy9ib25lLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIHZhciBhcm1hdHVyZSA9IGRyYWdvbkJvbmVzLlBpeGlGYWN0b3J5LmZhY3RvcnkuYnVpbGRBcm1hdHVyZShcImFybWF0dXJlXCIpO1xuICAgICAgICAgICAgLy8gdmFyIGFybWF0dXJlRGlzcGxheSA9IDxBcm1hdHVyZURpc3BsYXlUeXBlPmFybWF0dXJlLmRpc3BsYXk7XG4gICAgICAgICAgICAvLyBhcm1hdHVyZURpc3BsYXkueCA9IHRoaXMuX2dhbWUud2lkdGggKiAuNTtcbiAgICAgICAgICAgIC8vIGFybWF0dXJlRGlzcGxheS55ID0gdGhpcy5fZ2FtZS5oZWlnaHQgKiAuNTtcbiAgICAgICAgICAgIC8vIGFybWF0dXJlLmFuaW1hdGlvbi5wbGF5KFwibmV3QW5pbWF0aW9uXCIpO1xuICAgICAgICAgICAgYXJtYXR1cmVEaXNwbGF5LmludGVyYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIGFybWF0dXJlRGlzcGxheS5idXR0b25Nb2RlID0gdHJ1ZTtcblxuICAgICAgICAgICAgYXJtYXR1cmVEaXNwbGF5Lm9uKCdwb2ludGVyZG93bicsIHRoaXMub25EcmFnU3RhcnQsIHRoaXMpO1xuICAgICAgICAgICAgYXJtYXR1cmVEaXNwbGF5Lm9uKCdwb2ludGVydXAnLCB0aGlzLm9uRHJhZ0VuZCwgdGhpcyk7XG4gICAgICAgICAgICBhcm1hdHVyZURpc3BsYXkub24oJ3BvaW50ZXJ1cG91dHNpZGUnLCB0aGlzLm9uRHJhZ0VuZCwgdGhpcyk7XG4gICAgICAgICAgICBhcm1hdHVyZURpc3BsYXkub24oJ3BvaW50ZXJtb3ZlJywgdGhpcy5vbkRyYWdNb3ZlLCB0aGlzKTtcbiAgICAgICAgICAgIC8vdmFyIGludGVyYWN0aW9uTWFuYWdlcjpQSVhJLmludGVyYWN0aW9uLkludGVyYWN0aW9uTWFuYWdlciA9IG5ldyBQSVhJLmludGVyYWN0aW9uLkludGVyYWN0aW9uTWFuYWdlcih0aGlzLl9nYW1lKTtcbiAgICAgICAgICAgIGRyYWdvbkJvbmVzLldvcmxkQ2xvY2suY2xvY2suYWRkKGFybWF0dXJlKTtcbiAgICAgICAgICAgIHRoaXMuX3N0YWdlLmFkZENoaWxkKGFybWF0dXJlRGlzcGxheSk7XG4gICAgICAgICAgICB0aGlzLl9hcm1hdHVyZURpc3BsYXkgPSBhcm1hdHVyZURpc3BsYXk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIG9uRHJhZ1N0YXJ0KGV2ZW50OkludGVyYWN0aW9uRXZlbnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIHN0b3JlIGEgcmVmZXJlbmNlIHRvIHRoZSBkYXRhXG4gICAgICAgICAgICAvLyB0aGUgcmVhc29uIGZvciB0aGlzIGlzIGJlY2F1c2Ugb2YgbXVsdGl0b3VjaFxuICAgICAgICAgICAgLy8gd2Ugd2FudCB0byB0cmFjayB0aGUgbW92ZW1lbnQgb2YgdGhpcyBwYXJ0aWN1bGFyIHRvdWNoXG5cbiAgICAgICAgICAgIHRoaXMuX2RhdGEgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgdGhpcy5fZGF0YS5hbHBoYSA9IDAuNTtcbiAgICAgICAgICAgIHRoaXMuX2RyYWdnaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgdmFyIG5ld1Bvc2l0aW9uID0gdGhpcy5fZGF0YS5nZXRMb2NhbFBvc2l0aW9uKHRoaXMuX2FybWF0dXJlRGlzcGxheS5wYXJlbnQpO1xuICAgICAgICAgICAgdGhpcy5fYXJtYXR1cmVEaXNwbGF5LnggPSBuZXdQb3NpdGlvbi54O1xuICAgICAgICAgICAgdGhpcy5fYXJtYXR1cmVEaXNwbGF5LnkgPSBuZXdQb3NpdGlvbi55ICsgdGhpcy5fYXJtYXR1cmVEaXNwbGF5LmhlaWdodCAqIDAuNTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgb25EcmFnRW5kKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fZGF0YS5hbHBoYSA9IDE7XG4gICAgICAgICAgICB0aGlzLl9kcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gc2V0IHRoZSBpbnRlcmFjdGlvbiBkYXRhIHRvIG51bGxcbiAgICAgICAgICAgIHRoaXMuX2RhdGEgPSBudWxsO1xuXG4gICAgICAgICAgICB0aGlzLl9hcm1hdHVyZURpc3BsYXkueCA9IHRoaXMuX2dhbWUud2lkdGggKiAuNTtcbiAgICAgICAgICAgIHRoaXMuX2FybWF0dXJlRGlzcGxheS55ID0gdGhpcy5fZ2FtZS5oZWlnaHQgKiAuNTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgb25EcmFnTW92ZSgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKHRoaXMuX2RyYWdnaW5nKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBuZXdQb3NpdGlvbiA9IHRoaXMuX2RhdGEuZ2V0TG9jYWxQb3NpdGlvbih0aGlzLl9zdGFnZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fYXJtYXR1cmVEaXNwbGF5LnggPSBuZXdQb3NpdGlvbi54O1xuICAgICAgICAgICAgICAgIHRoaXMuX2FybWF0dXJlRGlzcGxheS55ID0gbmV3UG9zaXRpb24ueSArIHRoaXMuX2FybWF0dXJlRGlzcGxheS5oZWlnaHQgKiAwLjU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIF9hbmltYXRpb25FdmVudEhhbmRsZXIoZXZlbnQ6RXZlbnRUeXBlKTp2b2lkXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LnR5cGUsIGV2ZW50Lm5hbWUsIGV2ZW50LmFuaW1hdGlvblN0YXRlLm5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBfcmVuZGVySGFuZGxlcihkZWx0YVRpbWU6bnVtYmVyKTp2b2lkXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRyYWdvbkJvbmVzLldvcmxkQ2xvY2suY2xvY2suYWR2YW5jZVRpbWUoLTEpO1xuICAgICAgICAgICAgdGhpcy5fZ2FtZS5yZW5kZXIodGhpcy5fc3RhZ2UpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwibW9kdWxlIEdhbWVcbntcbiAgICBcInVzZSBzdHJpY3RcIlxuXG4gICAgZXhwb3J0IGNsYXNzIFByZWxvYWRlclxuICAgIHtcbiAgICAgICAgcHJpdmF0ZSBfZ2FtZSA9IG51bGw7XG4gICAgICAgIHByaXZhdGUgX3N0YWdlID0gbnVsbDtcbiAgICAgICAgcHJpdmF0ZSBfZ2FtZVZpZXc6R2FtZVZpZXcgPSBudWxsO1xuXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIFwidXNlIHN0cmljdFwiXG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgaW5pdChnYW1lOlBJWEkuV2ViR0xSZW5kZXJlciwgc3RhZ2U6UElYSS5Db250YWluZXIpOnZvaWRcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fZ2FtZSA9IGdhbWU7XG4gICAgICAgICAgICB0aGlzLl9zdGFnZSA9IHN0YWdlO1xuXG4gICAgICAgICAgICBQSVhJLnRpY2tlci5zaGFyZWQuYWRkKHRoaXMuX3JlbmRlckhhbmRsZXIsIHRoaXMpO1xuXG4gICAgICAgICAgICBQSVhJLmxvYWRlci5hZGQoXCJkcmFnb25Cb25lc0RhdGFcIiwgXCIuL3Jlc291cmNlcy9hcnRfc2tlLmpzb25cIik7XG4gICAgICAgICAgICBQSVhJLmxvYWRlci5hZGQoXCJ0ZXh0dXJlRGF0YUFcIiwgXCIuL3Jlc291cmNlcy9hcnRfdGV4Lmpzb25cIik7XG4gICAgICAgICAgICBQSVhJLmxvYWRlci5hZGQoXCJ0ZXh0dXJlQVwiLCBcIi4vcmVzb3VyY2VzL2FydF90ZXgucG5nXCIpO1xuICAgICAgICAgICAgUElYSS5sb2FkZXIub25jZShcImNvbXBsZXRlXCIsIHRoaXMuX2xvYWRDb21wbGV0ZUhhbmRsZXIsIHRoaXMpO1xuICAgICAgICAgICAgUElYSS5sb2FkZXIubG9hZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBfcmVuZGVySGFuZGxlcihkZWx0YVRpbWU6bnVtYmVyKTp2b2lkXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRyYWdvbkJvbmVzLldvcmxkQ2xvY2suY2xvY2suYWR2YW5jZVRpbWUoLTEpO1xuICAgICAgICAgICAgdGhpcy5fZ2FtZS5yZW5kZXIodGhpcy5fc3RhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBfbG9hZENvbXBsZXRlSGFuZGxlcihsb2FkZXI6UElYSS5sb2FkZXJzLkxvYWRlciwgb2JqZWN0OmRyYWdvbkJvbmVzLk1hcDxQSVhJLmxvYWRlcnMuUmVzb3VyY2U+KTp2b2lkXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRyYWdvbkJvbmVzLlBpeGlGYWN0b3J5LmZhY3RvcnkucGFyc2VEcmFnb25Cb25lc0RhdGEob2JqZWN0W1wiZHJhZ29uQm9uZXNEYXRhXCJdLmRhdGEpO1xuICAgICAgICAgICAgZHJhZ29uQm9uZXMuUGl4aUZhY3RvcnkuZmFjdG9yeS5wYXJzZVRleHR1cmVBdGxhc0RhdGEob2JqZWN0W1widGV4dHVyZURhdGFBXCJdLmRhdGEsIG9iamVjdFtcInRleHR1cmVBXCJdLnRleHR1cmUpO1xuXG4gICAgICAgICAgICB0aGlzLl9nYW1lVmlldyA9IG5ldyBHYW1lVmlldygpO1xuICAgICAgICAgICAgdGhpcy5fZ2FtZVZpZXcuaW5pdCh0aGlzLl9nYW1lLCB0aGlzLl9zdGFnZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJtb2R1bGUgR2FtZVxue1xuICAgIFwidXNlIHN0cmljdFwiXG5cbiAgICBleHBvcnQgY2xhc3MgTWFpblxuICAgIHtcbiAgICAgICAgcHJpdmF0ZSBfZ2FtZSA9IG5ldyBQSVhJLldlYkdMUmVuZGVyZXIoMjUwLCAyNTAsIHtiYWNrZ3JvdW5kQ29sb3I6MHhmZmZmZmZ9KTtcbiAgICAgICAgcHJpdmF0ZSBfc3RhZ2UgPSBuZXcgUElYSS5Db250YWluZXIoKTtcbiAgICAgICAgcHJpdmF0ZSBfYmFja2dyb3VkOlBJWEkuU3ByaXRlID0gbmV3IFBJWEkuU3ByaXRlKFBJWEkuVGV4dHVyZS5FTVBUWSk7XG4gICAgICAgIHByaXZhdGUgX3ByZWxvYWRlcjpQcmVsb2FkZXI7XG5cbiAgICAgICAgY29uc3RydWN0b3IoKVxuICAgICAgICB7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgaW5pdCgpOnZvaWRcbiAgICAgICAge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9nYW1lLnZpZXcpO1xuICAgICAgICAgICAgdGhpcy5fc3RhZ2UuYWRkQ2hpbGQodGhpcy5fYmFja2dyb3VkKTtcbiAgICAgICAgICAgIHRoaXMuX2JhY2tncm91ZC53aWR0aCA9IHRoaXMuX2dhbWUud2lkdGg7XG4gICAgICAgICAgICB0aGlzLl9iYWNrZ3JvdWQuaGVpZ2h0ID0gdGhpcy5fZ2FtZS5oZWlnaHQ7XG5cbiAgICAgICAgICAgIHRoaXMuc3RhcnRQcmVsb2FkZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgc3RhcnRQcmVsb2FkZXIoKTp2b2lkXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3ByZWxvYWRlciA9IG5ldyBQcmVsb2FkZXIoKTtcbiAgICAgICAgICAgIHRoaXMuX3ByZWxvYWRlci5pbml0KHRoaXMuX2dhbWUsIHRoaXMuX3N0YWdlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cInJlZmVyZW5jZXMudHNcIi8+XG5tb2R1bGUgR2FtZVxue1xuICAgIFwidXNlIHN0cmljdFwiXG5cbiAgICBjbGFzcyBBcHBTdGFydFxuICAgIHtcbiAgICAgICAgY29uc3RydWN0b3IoKVxuICAgICAgICB7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgaW5pdCgpOnZvaWRcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbWFpbjpHYW1lLk1haW4gPSBuZXcgR2FtZS5NYWluKCk7XG4gICAgICAgICAgICBtYWluLmluaXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFwcFN0YXJ0OkFwcFN0YXJ0ID0gbmV3IEFwcFN0YXJ0KCk7XG4gICAgYXBwU3RhcnQuaW5pdCgpO1xufVxuIl19
